package ch14_jdbc_conn.jdbc;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class TestMain {
public static void main(String[] args) {
	ConnectionFactory db = ConnectionFactory.getInstance();
	try {
		Connection conn = db.getConnection();
		System.out.println(conn);
		PreparedStatement ps = null;
		ResultSet rs = null;
		StringBuffer query = new StringBuffer();
		query.append(" SELECT user_id");
		query.append("		, user_nm");
		query.append("		, user_mail");
		query.append("		, user_mileage");
		query.append(" FROM tb_user");
		ps = conn.prepareStatement(query.toString()); //문자열이 멸령문으로 담긴다
		rs = ps.executeQuery(); // 쿼리문실행
		while (rs.next()) {
			//System.out.println(rs.getString("user_nm")); 이름 하나 했을때 실행 rs는 휘발성 한번사용하면 사라진다고 생각해라
			String userId = rs.getString("user_id");
			String userNm = rs.getString("user_nm");
			int userMileage = rs.getInt("user_mileage");
			System.out.println("아이디:" +userId + ","+"이름:" +userNm + ",마일리지:" +userMileage);
			
		}
	} catch (SQLException e) {
		e.printStackTrace();
	}
	
}
}
