package ch14_jdbc_conn.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import ch14_jdbc_conn.model.UserVO;

//DB에 사용되는 부분을 작성
public class UserDao {
	private static UserDao instance = new UserDao();
	public static UserDao getInstance() {
		return instance;
	}
	
	//회원 조회 로그인 관련
	public UserVO loginUser(Connection conn, String id) throws SQLException {
		UserVO userVO = new UserVO();
		StringBuffer query = new StringBuffer();
		query.append(" SELECT USER_ID");
		query.append("	,USER_PW");
		query.append("	,USER_NM");
		query.append("	,USER_MAIL");
		query.append("	,USER_MILEAGE");
		query.append(" FROM tb_user");
		query.append(" where user_id = 'a001';");
		PreparedStatement ps = conn.prepareStatement(query.toString());
		ps.setString(1, id);
		ResultSet rs = ps.executeQuery();
		while(rs.next()) {
			userVO.setUserId(rs.getString("user_id"));
			userVO.setUserNm(rs.getString("user_nm"));
			userVO.setUserPw(rs.getString("user_pw"));
			userVO.setUserMileage(rs.getInt("user_mileage"));
		}
		if(ps !=null)ps.close();
		if(rs != null)rs.close();
		return userVO;
	}
	
}
